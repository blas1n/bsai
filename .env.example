# =============================================================================
# BSAI Unified Environment Configuration
# =============================================================================
# This file contains configuration for both backend (FastAPI) and frontend (Next.js)
# Copy to .env and update values as needed

# =============================================================================
# Backend: Database (use 'postgres' hostname inside devcontainer)
# =============================================================================
DATABASE_URL=postgresql+asyncpg://postgres:postgres@postgres:5432/bsai

# =============================================================================
# Backend: Redis Cache (use 'redis' hostname inside devcontainer)
# =============================================================================
CACHE_REDIS_URL=redis://redis:6379/0
CACHE_REDIS_MAX_CONNECTIONS=20

# =============================================================================
# Backend: Keycloak Authentication (use 'keycloak' hostname inside devcontainer)
# =============================================================================
AUTH_KEYCLOAK_URL=http://keycloak:8080
AUTH_KEYCLOAK_REALM=bsai
AUTH_KEYCLOAK_CLIENT_ID=bsai-api
# AUTH_KEYCLOAK_CLIENT_SECRET=  # Only needed for confidential clients

# =============================================================================
# Backend: API Settings
# =============================================================================
API_DEBUG=true
API_CORS_ORIGINS=["http://localhost:3000","http://localhost:13000"]

# =============================================================================
# Backend: LLM Providers (configure at least one)
# =============================================================================

# OpenAI
OPENAI_API_KEY=sk-your-openai-key

# Anthropic
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key

# Azure OpenAI (optional)
# AZURE_OPENAI_API_KEY=
# AZURE_OPENAI_ENDPOINT=
# AZURE_OPENAI_API_VERSION=2024-02-01

# =============================================================================
# Backend: MCP (Model Context Protocol) Configuration
# =============================================================================
# Generate encryption key with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
MCP_ENCRYPTION_KEY=your-base64-fernet-key-change-in-production

# Allowed stdio commands (comma-separated)
# MCP_ALLOWED_STDIO_COMMANDS=["npx","node","python","python3","deno"]

# Tool execution limits
# MCP_TOOL_EXECUTION_TIMEOUT=30
# MCP_MAX_TOOL_CALLS_PER_REQUEST=5
# MCP_TOOL_CALLS_PER_HOUR=100

# =============================================================================
# Backend: Langfuse (LLM Observability - Cloud)
# =============================================================================
# Get your keys from https://cloud.langfuse.com
LANGFUSE_PUBLIC_KEY=pk-lf-your-public-key
LANGFUSE_SECRET_KEY=sk-lf-your-secret-key
LANGFUSE_HOST=https://cloud.langfuse.com

# =============================================================================
# Backend: Logging
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# Backend: Development
# =============================================================================
ENVIRONMENT=development

# =============================================================================
# Frontend: API URLs
# =============================================================================
NEXT_PUBLIC_API_URL=http://localhost:18000
NEXT_PUBLIC_WS_URL=ws://localhost:18000

# =============================================================================
# Frontend: NextAuth Configuration (required)
# =============================================================================
NEXTAUTH_URL=http://localhost:13000
NEXTAUTH_SECRET=your-nextauth-secret-change-in-production

# =============================================================================
# Frontend: Keycloak Configuration (required for auth)
# =============================================================================
# These values match infra/keycloak/bsai-realm.json
KEYCLOAK_ID=bsai-web
KEYCLOAK_SECRET=bsai-web-secret-change-in-production

# Keycloak URL Configuration:
# - Production: Set only KEYCLOAK_ISSUER to the public URL (e.g., https://auth.example.com/realms/bsai)
# - Development (devcontainer): Set KEYCLOAK_ISSUER_INTERNAL and KEYCLOAK_ISSUER_EXTERNAL separately
#
# KEYCLOAK_ISSUER: Base URL (used as fallback for INTERNAL/EXTERNAL if not set)
KEYCLOAK_ISSUER=http://localhost:8080/realms/bsai
# KEYCLOAK_ISSUER_INTERNAL: Server-side URL (inside Docker network)
KEYCLOAK_ISSUER_INTERNAL=http://keycloak:8080/realms/bsai
# KEYCLOAK_ISSUER_EXTERNAL: Browser-side URL (accessible from host machine)
KEYCLOAK_ISSUER_EXTERNAL=http://localhost:8080/realms/bsai
